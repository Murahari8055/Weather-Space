<div class="post-list-container">
  <div class="post-list-header">
    <h3>Weather Posts</h3>
    <div class="filter-controls">
      <button (click)="filterByLocation()" class="filter-button">Show Local Posts</button>
      <button (click)="clearFilter()" class="filter-button">Show All Posts</button>
    </div>
  </div>

  <div *ngIf="loading" class="loading">Loading posts...</div>

  <div *ngIf="!loading && posts.length === 0" class="no-posts">
    No posts yet. Be the first to share your weather experience!
  </div>

  <div class="posts" *ngIf="!loading && posts.length > 0">
    <div class="post-card" *ngFor="let post of posts">
      <div class="post-header">
        <img [src]="post.user.profilePictureUrl ? post.user.profilePictureUrl : 'assets/default-avatar.png'" 
             alt="User Avatar" class="avatar" />
        <span class="username">{{ post.user.username }}</span>
        <span class="location" *ngIf="post.location">{{ post.location }}</span>
        <span class="timestamp">{{ post.createdAt | date:'short' }}</span>
        <button *ngIf="canDeletePost(post)" (click)="deletePost(post.id)" class="delete-button">Delete</button>
      </div>

      <div class="post-content">
        <p>{{ post.content }}</p>
        <div *ngIf="post.mediaUrl" class="post-media">
          <img *ngIf="isImage(post.mediaUrl)" [src]="post.mediaUrl" alt="Post media" class="post-image">
          <video *ngIf="isVideo(post.mediaUrl)" [src]="post.mediaUrl" controls class="post-video"></video>
        </div>
      </div>

      <app-comment [postId]="post.id"></app-comment>
    </div>
  </div>
</div>
